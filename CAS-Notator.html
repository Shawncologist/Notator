<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    body {
      background-color: #FFFFFF;
      width: 100%;
      height: 100vh;
      font-family: "calibri", sans-serif;
    }

    /* div {
    border: 1px solid pink;
  } */

    input[type="text"],
    textarea,
    select {
      outline: none !important;
      box-shadow: none;
    }

    input[type="date"]:before {
      content: attr(placeholder) !important;
      color: #aaa;
      margin-right: 0.5em;
    }

    input[type="date"]:focus:before,
    input[type="date"]:valid:before {
      content: "";
    }

    section {
      padding: 0 0 200px 0;
      min-height: 660px;
    }

    /* Themes */

    .theme-bluer:focus {
      -webkit-transition: all 0.30s ease-in-out;
      -moz-transition: all 0.30s ease-in-out;
      -ms-transition: all 0.30s ease-in-out;
      -o-transition: all 0.30s ease-in-out;
      border: 1px solid #DDDDDD;
      background-color: #c7e2f373;
      box-shadow: 0 0 5px rgba(81, 203, 238, 1);
      border: 1px solid rgba(81, 203, 238, 1);
    }

    .theme-bluer {
      background-color: #c7e2f373;
    }

    .theme-coal:focus {
      -webkit-transition: all 0.30s ease-in-out;
      -moz-transition: all 0.30s ease-in-out;
      -ms-transition: all 0.30s ease-in-out;
      -o-transition: all 0.30s ease-in-out;
      background-color: #4a463f84;
      box-shadow: none;
      border: 1px solid #322f29;
    }

    .theme-coal {
      background-color: #4a463f84;
      color: #c4cccc;
      border: 1px solid #DDDDDD;
    }


    .theme-seafoam:focus {
      -webkit-transition: all 0.30s ease-in-out;
      -moz-transition: all 0.30s ease-in-out;
      -ms-transition: all 0.30s ease-in-out;
      -o-transition: all 0.30s ease-in-out;
      border: 1px solid #DDDDDD;
      background-color: #3DED9722;
      box-shadow: 0 0 5px rgba(61, 237, 151, 1);
      border: 1px solid rgba(61, 237, 151, 1);
    }

    .theme-seafoam {
      background-color: #3DED9722;
    }

    .theme-pinker:focus {
      -webkit-transition: all 0.30s ease-in-out;
      -moz-transition: all 0.30s ease-in-out;
      -ms-transition: all 0.30s ease-in-out;
      -o-transition: all 0.30s ease-in-out;
      border: 1px solid #db86e8;
      background-color: #f2a9ed22;
      box-shadow: 0 0 5px #db86e8;
      border: 1px solid #db86e8;
    }

    .theme-pinker {
      background-color: #f2a9ed22;
    }

    .theme-plain {
      background-color: #CCCCCC22;
      border: 1px solid #4a463f55;
    }

    .theme-plain:focus {
      -webkit-transition: all 0.30s ease-in-out;
      -moz-transition: all 0.30s ease-in-out;
      -ms-transition: all 0.30s ease-in-out;
      -o-transition: all 0.30s ease-in-out;
      background-color: #CCCCCC22;
      box-shadow: none;
      border: 1px solid #4a463fd9;
    }


    /* end of themes */

    .btn:focus {
      outline: none;
      box-shadow: none;
    }

    .btn-combine {
      float: left;
      margin: 10px 40px 0 0;
    }

    .btn-reset {
      float: right;
      margin: 10px 0;
    }

    .container-fluid {
      padding-left: 0;
      padding-right: 0;
    }

    .divider {
      width: 80%;
      margin: auto;
    }

    .fa-icon {
      color: #616161;
    }

    .fas-nav {
      padding: 0 0 0 34px;
    }

    .footer {
      margin: 0 0.1rem;
      font-size: .75rem;
      padding: 0.3rem;
    }

    .footerbtns {
      margin: 0 5px 0 5px;
    }

    .form-select {
      /* color: #71869A; */
      outline: none;
      box-shadow: none;
    }

    .form-control::placeholder {
      color: #CCCCCC;
      opacity: 1;
    }


    .history {
      white-space: pre-wrap;
      overflow: auto;
      max-height: 600px;
    }

    .nav-footer {
      border: 1px solid #616161;
      background-color: #E9ECEF;
      font-size: .75rem;
    }

    .ptpWarning {
      color: red;
      text-align: center;
      margin-bottom: 0px;
      display: none;
    }

    .row {
      margin-bottom: 15px;
    }

.tags-menu {
  margin-top: 10px;
}

    .verbatim-box {
      border: 1px solid #CED4DA;
      display: none;
      padding: 10px;
    }

    .verbatim-ptp {
      border: 1px solid #CED4DA;
      padding: 10px;
      margin-bottom: 10px;
    }

    .warning {
      color: red;
      text-align: center;
      margin-bottom: 0px;
      display: none;
    }
  </style>

<body>
  <div id="notator">
    <section id="CAS">
      <form id="notatorForm">
        <div class="container-fluid">
          <div class="row">
            <!-- column a -->
            <div class="col-lg-6">
              <div class="row">
                <div class="col-lg-6">
                  <div class="input-group g-">
                    <div class="input-group-text"><i class="fas fa-user fa-icon"></i></div>
                    <label for="inputName" class="visually-hidden"></label>
                    <input type="text" class="form-control theme-plain themed" id="inputName" placeholder="First and Last Name">
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="input-group g-3">
                    <div class="input-group-text"><i class="fas fa-phone fa-icon"></i></div>
                    <label for="inputMsisdn" class="visually-hidden">MSISDN</label>
                    <input type="text" class="form-control theme-plain themed" id="inputMsisdn" placeholder="CX Phone #">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-4">
                  <div class="input-group g-3">
                    <div class="input-group-text"><i class="fas fa-hand-paper fa-icon"></i></div>
                    <select class="form-select theme-plain themed" aria-label="Default select example" id="inputStatus" type="text">
                      <option selected>CX Status</option>
                      <option value="Account Holder">Account Holder</option>
                      <option value="Authorized User">Authorized User</option>
                      <option value="Device User">Device User</option>
                      <option value="Not Authorized">Not Authorized</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-4">
                  <div class="input-group g-3">
                    <div class="input-group-text"><i class="fas fa-lock fa-icon"></i></div>
                    <select class="form-select theme-plain themed" aria-label="Default select example" id="inputVerification">
                      <option selected>Verification</option>
                      <option value="Yes, with PIN">Yes, with PIN</option>
                      <option value="Yes, with MFA">Yes, with MFA</option>
                      <option value="No, wrong PIN">No, wrong PIN</option>
                      <option value="No, unverified">No, unverified</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-4">
                  <div class="input-group g-3">
                    <div class="input-group-text"><i class="fas fa-hashtag fa-icon"></i></div>
                    <label for="inputContactId" class="visually-hidden">Contact ID</label>
                    <input type="text" class="form-control theme-plain themed" id="inputContactId" placeholder="Conversation ID">
                  </div>
                </div>
              </div>
              <div class="row warning">
                <div class="col-lg-12">
                  <p><strong>This customer may not be given any information from the account!</strong></p>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <label for="inputProblem" class="visually-hidden">Problem</label>
                  <textarea rows="4" cols="10" class="form-control theme-plain themed" id="inputProblem" placeholder="Primary reason for the customer's call"></textarea>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <label for="inputAction" class="visually-hidden">Actions</label>
                  <textarea rows="10" cols="10" class="form-control theme-plain themed" id="inputAction" placeholder="Actions you took and information you gave"></textarea>
                </div>
              </div>
              <!-- Specialized Call Fields -->
              <div class="row">
                <div class="col-lg-6">
                  <div class="input-group g-3">
                    <div class="input-group-text"><i class="fas fa-hat-wizard fa-icon"></i></div>
                    <select class="form-select theme-plain themed" aria-label="Default select example" id="inputSpecialTopic" onclick="ptpDueDate()">
                      <option selected>Select a specialized topic</option>
                      <option value="Loyalty">Loyalty - NOT YET</option>
                      <option value="Outage">Outage Refund</option>
                      <option value="Tech">Technical Support - NOT YET</option>
                      <option value="Promise to Pay">Promise to Pay</option>
                      <option value="Vacation">Vacation Suspend - NOT YET</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="input-group g-3 temporary" id="lastBroken">
                    <div class="input-group-text"><i class="fas fa-calendar-times fa-icon"></i></div>
                    <label for="inputLastBroken" class="visually-hidden"></label>
                    <input type="date" class="form-control theme-plain themed" id="inputLastBroken" placeholder="Last Broken:">
                  </div>
                  <div class="input-group g-3 temporary" id="outageMonthlyCharge">
                    <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
                    <label for="inputOutageMonthlyCharge" class="visually-hidden">Monthly Charge</label>
                    <input type="number" class="form-control theme-plain themed" id="inputOutageMonthlyCharge" placeholder="Customer's monthly charge">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-6">
                  <div class="input-group g-3 temporary" id="payAmount">
                    <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
                    <label for="inputMsisdn" class="visually-hidden">Payment Amount</label>
                    <input type="number" class="form-control theme-plain themed" id="inputPayAmount" placeholder="Amount to be paid">
                  </div>
                  <div class="input-group g-3 temporary" id="outageLength">
                    <div class="input-group-text"><i class="fas fa-calendar-times fa-icon"></i></div>
                    <label for="inputOutageLength" class="visually-hidden">Outage Length</label>
                    <input type="number" class="form-control theme-plain themed" id="inputOutageLength" placeholder="Length of outage in days">
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="input-group g-3 temporary" id="payMethod">
                    <div class="input-group-text"><i class="fas fa-donate fa-icon"></i></div>
                    <select class="form-select theme-plain themed" aria-label="Default select example" id="inputPayMethod">
                      <option selected>Method of payment</option>
                      <option value="Bank">Bank</option>
                      <option value="Customer Care">Customer Care</option>
                      <option value="MyAccount">MyAccount</option>
                      <option value="Retail">Retail</option>
                      <option value="Unknown">Unknown</option>
                    </select>
                  </div>
                  <div class="">
                    <button id="outage-calc-btn" onclick="outageCalculator()" class="btn btn-secondary temporary" type="button">Calculate Refund</button>
                  </div>
                </div>
              </div>

              <div class="row ptpWarning temporary">
                <div class="col-lg-12">
                  <p><strong>This customer does not qualify to make a Promise to Pay!</strong></p>
                </div>
              </div>
              <div class="row temporary" id="treatmentChecks">
                <div class="col-lg-12">
                  <div id="ptpDue" class="verbatim-ptp">

                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="I informed them that payment must be received within 7 days." id="checkPayBefore">
                    <label class="form-check-label" for="checkPayBefore">
                      I informed them that payment must be received within 7 days.
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="I informed them we will not accept another Promise to Pay for 90 days if they miss this payment." id="checkBroken90">
                    <label class="form-check-label" for="checkBroken90">
                      I informed them we will not accept another Promise to Pay for 90 days if they miss this payment.
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="I informed them that cash payments may take up to 24 hours." id="checkCash24">
                    <label class="form-check-label" for="checkCash24">
                      I informed them that cash payments may take 24 hours.
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="I informed them that bank payments may take 3 - 5 business days." id="check3Business">
                    <label class="form-check-label" for="check3Business">
                      I informed them that bank payments may take 3 - 5 business days.
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <div id="outageVerbatim" class="temporary verbatim verbatim-box">

                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-lg-6">
                  <div class="input-group g-3 temporary  verbatim" id="outageRefundChoice">
                    <div class="input-group-text"><i class="fas fa-donate fa-icon"></i></div>
                    <select class="form-select theme-plain themed" id="inputOutageRefundChoice">
                      <option selected>Chosen refund option</option>
                      <option value="Refund">Up front refund</option>
                      <option value="Monthly5">Temporary $5 per month offer</option>
                      <option value="noOffer">None of the above</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <!-- column b -->
            <div class="col-lg-6">
              <label for="casOutput" class="visually-hidden">Note</label>
              <textarea rows="25" cols="10" class="form-control theme-plain themed" id="casOutput"
                placeholder="Your notes will appear here when you click Combine. They are automatically copied, so you're ready to paste them into Singleview."></textarea>
              <div>
                <div class="row">
<div class="col-md-4">
                <button id="copy-btn" onclick="formsCombine()" class="btn btn-secondary btn-combine" type="button">Combine & Copy</button>
</div>
                <div class="col-md-4">
                  <div class="input-group g-3 tags-menu">
                    <div class="input-group-text"><i class="fas fa-tag fa-icon"></i></div>
                    <select class="form-select theme-plain themed" aria-label="Default select" id="inputTag" type="text">
                      <option selected>Tag it!</option>
                      <option value="** Address Change **">** Address Change **</option>
                      <option value="** Customer Failed Verification **">** Customer Failed Verification **</option>
                      <option value="** No More Promotions **">** No More Promotions **</option>
                      <option value="** Promise to Pay Denied **">** Promise to Pay Denied **</option>
                      <option value="** Promotion or Credit Applied **">** Promotion or Credit Applied **</option>
                      <option value="** Roaming Conversation**">** Roaming Conversation**</option>
                      <option value="** Unauthorized User **">** Unauthorized User **</option>
                    </select>
                  </div>
                </div>

<div class="col-md-4">
                <button class="btn btn-secondary btn-reset justify-content-md-end" type="button" value="reset" onClick="resetHistoryCombo()">Reset</button>
              </div>
            </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </section>
    <section id="history">
      <h4>Note History</h4><br>
      <hr>
      <div id="historyPrint" class="history"></div>
    </section>
    <section id="prepaidCalculator">
      <h4>Pre-Paid Calculator</h4><br>
      <h5>Simple Thirds</h5>
      <form id="prepaidProration">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-3">
              <div class="input-group g-3">
                <div class="input-group-text"><i class="fas fa-calendar fa-icon"></i></div>
                <select class="form-select theme-plain themed" aria-label="Default select" id="prepaidThirds">
                  <option selected>Days until next top-up date?</option>
                  <option value="33">1 - 10 days remaining</option>
                  <option value="66">11 - 20 days remaining</option>
                  <option value="99">21 - 30 days remaining</option>
                </select>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-3">
              <div class="input-group g-3">
                <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
                <label for="inputPrepaidRatePlan" class="visually-hidden">Price of the item</label>
                <input type="numbers" class="form-control theme-plain themed" id="prepaidItemPrice" placeholder="Price of the item">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-3">
              <div class="">
                <button id="prepaid-calc-btn" onclick="prepaidThirdsCalc()" class="btn btn-secondary btn-combine" type="button">Calculate</button>
                <button class="btn btn-secondary btn-reset justify-content-md-end" type="button" value="reset" onClick="resetPreCalc()">Reset</button>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-3">
              <div class="input-group g-3">
                <div class="input-group-text"><i class="fas fa-equals fa-icon"></i></div>
                <label for="inputPrepaidRatePlan" class="visually-hidden">Amount to pay</label>
                <input type="text" class="form-control theme-plain themed" id="prepaidThirdsResult" placeholder="Amount to pay">
              </div>

            </div>

          </div>
      </form>
    </section>
    <section id="postpaidCalculator">
      <h4>Post-Paid Calulator</h4><br>
      <form id="postpaidProration">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-3">
              <div class="input-group g-3" id="oldMrcPrice">
                <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
                <label for="inputOldMrcPrice" class="visually-hidden">Price of Old Item</label>
                <input type="number" class="form-control theme-plain themed" id="inputOldMrcPrice" placeholder="Price of removed item">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-3">
              <div class="input-group g-3" id="mrcPrice">
                <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
                <label for="inputMrcPrice" class="visually-hidden">Price of New Item</label>
                <input type="number" class="form-control theme-plain themed" id="inputMrcPrice" placeholder="Price of added Item">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-3">
              <div class="input-group g-3" id="mrcDaysRemainingOld">
                <div class="input-group-text"><i class="fas fa-hashtag fa-icon"></i></div>
                <label for="inputMrcDaysRemaining" class="visually-hidden">Days remaining</label>
                <input type="number" class="form-control theme-plain themed" id="inputMrcDaysRemaining" placeholder="Days remaining">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-3">
              <div class="">
                <button id="postpaid-calc-btn" onclick="postpaidCalc()" class="btn btn-secondary btn-combine" type="button">Calculate</button>
                <button class="btn btn-secondary btn-reset justify-content-md-end" type="button" value="reset" onClick="resetPostCalc()">Reset</button>
              </div>

            </div>
            <div class="row">
              <div class="col-lg-3">
                <div class="input-group g-3">
                  <div class="input-group-text"><i class="fas fa-equals fa-icon"></i></div>
                  <label for="postpaidResult" class="visually-hidden">Amount to pay</label>
                  <input type="text" class="form-control theme-plain themed" id="postpaidResult" placeholder="Amount to pay">
                </div>
                <p class="footer">Note: a month in SingleView is 30.4375 days (average of month lengths over 4 years)</p>
              </div>

            </div>
          </div>
      </form>
    </section>
    <section id="taxCalculator">
      <h4>Tax Calculator</h4>
    </section>
    <section id="aboutNotator">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-4">
            <h4>Instructions</h4>
            <br>
            <h6>General Note Taking</h6>
            <ul>
              <li>The "Combine & Copy" button will assemble your note and also copy it to the clipboard.</li>
              <li>The "Role" menu in the footer will persist your choice as long as the Pipe tab is not closed.</li>
              <li>Information entered in fields is saved if you use the footer menu to visit other pages and return.</li>
              <li>Calendar fields, such as "Last Broken PTP", can use the calendar icon on the right of the field to select a date.</li>
            </ul><br>
            <h6>Note History</h6>
            <ul>
              <li>The "Reset" button is what triggers a note to be written to the History page.</li>
              <li>The notes on the History page are only saved until the Pipe tab is closed or reset.</li>
            </ul>

          </div>
          <div class="col-lg-1">


          </div>
          <div class="col-lg-4">
            <h4>Change Log</h4>

          </div>
        </div>


    </section>
    <!-- end calculators -->

  </div>

  <div class="fixed-bottom nav-footer row align-items-center footer">
    <div class="col-md-2 justify-content-start">
      <div class="input-group g-2" id="role">
        <select class="form-select" id="inputRole">
          <option selected>Role</option>
          <option value="CAS Phone">CAS Phone</option>
          <option value="CAS Messaging">CAS Messaging</option>
          <option value="Digital Social Media">Digital: Social Media</option>
        </select>
      </div>
    </div>

    <div class="col-md-2 justify-content-start">
      <div class="input-group g-2" id="footerMenu">
        <select class="form-select" id="inputFooterMenu">
          <option selected value="Notes">Notes</option>
          <option value="History">History</option>
          <option value="Post-paid Calculator">Post-paid Calculator</option>
          <option value="Pre-paid Calculator">Pre-paid Calculator</option>
          <option value="Tax Calculator">Tax Calculator</option>
          <option value="About Notator">About Notator</option>
        </select>
      </div>
    </div>

    <div class="col-md-2 justify-content-start">
      <div class="input-group g-2" id="footerTheme">
        <select class="form-select" id="inputFooterTheme">
          <option selected value="Notes">Theme</option>
          <option value="Blue">Blue</option>
          <!-- <option value="Coal">Coal</option> -->
          <option value="Pink">Pink</option>
          <option value="Seafoam">Seafoam</option>
          <!-- <option value="Tiger">Tiger</option> -->
        </select>
      </div>
    </div>

    <div class="col-md-4">
    </div>
    <div class="col-md-1 d-flex justify-content-end" id="d20" onclick="randomTwenty()">[ 00 ]</div>
    <div class="col-md-1 d-flex justify-content-end">
      v.4.01.1
    </div>
  </div>
  <!-- </nav> -->

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://kit.fontawesome.com/8e9d7e365b.js" crossorigin"anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script>
    let dailyRate = "";
    let totalRefund = "";
    let roundedOffer = "";
    let altOfferMonths = "";
    let output = "";
    let ptpPayBefore = "";

    // CA form display, or not
    $("#inputSpecialTopic").change(function() {
      if ($(this).val() == "Loyalty") {
        $('#cancelType').show();
        $('#techType').hide();
        $('#lastBroken').hide();
        $('#outage-calc-btn').hide();
        $('#outageLength').hide();
        $('#outageMonthlyCharge').hide();
        $('#outageVerbatim').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
        $('.verbatim').hide();
      } else if ($(this).val() == "Outage") {
        $('#cancelType').hide();
        $('#techType').hide();
        $('#lastBroken').hide();
        $('#outage-calc-btn').show();
        $('#outageLength').show();
        $('#outageMonthlyCharge').show();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
      } else if ($(this).val() == "Tech") {
        $('#cancelType').hide();
        $('#techType').show();
        $('#lastBroken').hide();
        $('#outage-calc-btn').hide();
        $('#outageLength').hide();
        $('#outageMonthlyCharge').hide();
        $('#outageVerbatim').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
        $('.verbatim').hide();
      } else if ($(this).val() == "Promise to Pay") {
        $('#cancelType').hide();
        $('#techType').hide();
        $('#lastBroken').show();
        $('#outage-calc-btn').hide();
        $('#outageLength').hide();
        $('#outageMonthlyCharge').hide();
        $('#outageVerbatim').hide();
        $('#payAmount').show();
        $('#payMethod').show();
        $('#treatmentChecks').show();
        $('.verbatim').hide();
      } else {
        $('#cancelType').hide();
        $('#techType').hide();
        $('#lastBroken').hide();
        $('#outage-calc-btn').hide();
        $('#outageLength').hide();
        $('#outageMonthlyCharge').hide();
        $('#outageVerbatim').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
        $('.verbatim').hide();
      }
    });
    $("#inputSpecialTopic").trigger("change");

    // footer  menu
    $("#inputFooterMenu").change(function() {
      if ($(this).val() == "History") {
        $('#CAS').hide();
        $('#history').show();
        $('#prepaidCalculator').hide();
        $('#postpaidCalculator').hide();
        $('#taxCalculator').hide();
        $('#aboutNotator').hide();
      } else if ($(this).val() == "Post-paid Calculator") {
        $('#CAS').hide();
        $('#history').hide();
        $('#prepaidCalculator').hide();
        $('#postpaidCalculator').show();
        $('#taxCalculator').hide();
        $('#aboutNotator').hide();
      } else if ($(this).val() == "Pre-paid Calculator") {
        $('#CAS').hide();
        $('#history').hide();
        $('#prepaidCalculator').show();
        $('#postpaidCalculator').hide();
        $('#taxCalculator').hide();
        $('#aboutNotator').hide();
      } else if ($(this).val() == "Tax Calculator") {
        $('#CAS').hide();
        $('#history').hide();
        $('#prepaidCalculator').hide();
        $('#postpaidCalculator').hide();
        $('#taxCalculator').show();
        $('#aboutNotator').hide();
      } else if ($(this).val() == "About Notator") {
        $('#CAS').hide();
        $('#history').hide();
        $('#prepaidCalculator').hide();
        $('#postpaidCalculator').hide();
        $('#taxCalculator').hide();
        $('#aboutNotator').show();
      } else {
        $('#CAS').show();
        $('#history').hide();
        $('#prepaidCalculator').hide();
        $('#postpaidCalculator').hide();
        $('#taxCalculator').hide();
        $('#aboutNotator').hide();
      }
    });
    $("#inputFooterMenu").trigger("change");


    // themes
    function clearThemes() {
      $(".themed").removeClass("theme-bluer theme-pinker theme-plain theme-coal theme-seafoam");
    }

    $("#inputFooterTheme").change(function() {
      clearThemes();
      if ($(this).val() === "Pink") {
        $(".themed").addClass('theme-pinker');
      } else if ($(this).val() === "Blue") {
        $(".themed").addClass('theme-bluer');
      } else if ($(this).val() === "Coal") {
        $(".themed").addClass('theme-coal');
      } else if ($(this).val() === "Seafoam") {
        $(".themed").addClass('theme-seafoam');
      } else {
        $(".themed").addClass('theme-plain');
      }
    });
    $("#inputFooterTheme").trigger("change");


    // warning message (flawed code, needs to be done better)
    $(document.body).click(function() {
      if ($("#inputStatus").val() === "Not Authorized" || $("#inputVerification").val() === "No, wrong PIN" || $("#inputVerification").val() === "No, unverified") {
        $('.warning').show();
      } else {
        $('.warning').hide();
      }
    });

    // PTP warning message (flawed code, needs to be done better)
    $("#inputLastBroken").change(function() {
      var today = new Date();
      var ptpBrokenDate = $("#inputLastBroken").val();
      var ptpDateRule = new Date(new Date().setDate(today.getDate() - 89));
      ptpBrokenDate = new Date(ptpBrokenDate);
      if (ptpDateRule < ptpBrokenDate) {
        $('.ptpWarning').show();
      } else {
        $('.ptpWarning').hide();
      }
    });

    // Nothing important
    function randomTwenty() {
      let d = document.querySelector("#d20");
      d.innerText = "[ " + (Math.floor(Math.random(20) * 20) + 1).toLocaleString('en-US', {
        minimumIntegerDigits: 2,
        useGrouping: false
      }) + " ]";
    }

    // outage calculator
    function outageCalculator() {
      var outCalLength = $("#inputOutageLength").val();
      var outCalMonth = $("#inputOutageMonthlyCharge").val();
      dailyRate = ((((outCalMonth * 100) * 12) / 365) / 100).toFixed(2);
      totalRefund = (dailyRate * outCalLength).toFixed(2);
      roundedOffer = Math.ceil(totalRefund);
      if (roundedOffer < 5) {
        altOfferMonths = 1;
      } else if (roundedOffer >= 5 && roundedOffer <= 8) {
        altOfferMonths = 2;
      } else if (roundedOffer > 8 && roundedOffer <= 10) {
        altOfferMonths = 3;
      } else if (roundedOffer > 10 && roundedOffer <= 12) {
        altOfferMonths = 4;
      } else if (roundedOffer > 12 && roundedOffer <= 30) {
        altOfferMonths = 6;
      } else {
        altOfferMonths = 0;
      }

      var makeOffer = "";
      if (roundedOffer >= 5.01 && roundedOffer <= 30.01) {
        makeOffer = $("#outageVerbatim").html("Looking at your account I see your monthly charge is " + "<strong>" + "$" + outCalMonth + "</strong>" + "<br>" + "Which means your service cost is " + "<strong>" + "$" + dailyRate + "</strong>" +
          " per day. " + "<br>" +
          "At that cost, this outage of " + "<strong>" + outCalLength + "</strong>" + " days equals a refund of " + "<strong>" + "$" + totalRefund + "</strong>" + "<br>" + "I'm happy to round that amount up to " + "<strong>" + "$" + roundedOffer +
          "</strong>" + "<br>" + "or if you prefer, I can apply a temporary discount of " + "<strong>" + "$5 off for " + altOfferMonths + " months." + "</strong>" + "<br><br>" + "Which would you like me to place on your account for you?");
      } else {
        $("#outageVerbatim").html("Looking at your account I see your monthly charge is " + "<strong>" + "$" + outCalMonth + "</strong>" + "<br>" + "Which means your service cost is " + "<strong>" + "$" + dailyRate + "</strong>" + " per day. " +
          "<br>" +
          "At that cost, this outage of " + "<strong>" + outCalLength + "</strong>" + " days equals a refund of " + "<strong>" + "$" + totalRefund + "</strong>" + "<br>" + "I'm happy to round that amount up to " + "<strong>" + "$" + roundedOffer +
          "</strong>");
      }
      $('.verbatim').show();
      return roundedOffer;
    };



    // calculate payment due date PTP
    function ptpDueDate() {
      var ptpVerbatim = "";
      var today = new Date();
      ptpPayBefore = new Date(new Date().setDate(today.getDate() + 6));
      const longEnUSFormatter = new Intl.DateTimeFormat('en-US', {
        month: 'long',
        day: 'numeric',
        weekday: 'long',
      });
      ptpPayBefore = longEnUSFormatter.format(ptpPayBefore);

      ptpVerbatim = $("#ptpDue").html("We must receive the payment by " + ptpPayBefore);

      return ptpVerbatim;
    }


    // assemble note output
    function formsCombine() {

      var cxName = $("#inputName").val();
      var cxMsisdn = $("#inputMsisdn").val();
      var cxStatus = $("#inputStatus").val();
      var contactId = $("#inputContactId").val();
      var cxVerify = $("#inputVerification").val();
      var cxProblem = $("#inputProblem").val();
      var cxAction = $("#inputAction").val();
      var callType = $("#inputSpecialTopic").val();
      var cxBroken = $("#inputLastBroken").val();
      var cxPay = $("#inputPayAmount").val();
      var cxMethod = $("#inputPayMethod").val();
      var outLength = $("#inputOutageLength").val();
      var outMonth = $("#inputOutageMonthlyCharge").val();
      var outRefundChoice = $("#inputOutageRefundChoice").val();
      var roleTag = $("#inputRole").val();
      var inputTag = $("#inputTag").val();
      var cxCheckPayBefore = document.getElementById("checkPayBefore").checked;
      var cxCheckBroken90 = document.getElementById("checkBroken90").checked;
      var cxcheckCash24 = document.getElementById("checkCash24").checked;
      var cxcheck3Business = document.getElementById("check3Business").checked;

      cxName = cxName.toLowerCase().replace(/(^\w{1})|(\s{1}\w{1})/g, match => match.toUpperCase());

      if (inputTag === "Tag it!") {
        output = "";
      } else {
        output = inputTag + "\n";
      }
      if (callType === "Loyalty") {
        output += callType + "\n\n";
      } else if (callType === "Tech") {
        output += callType + " support" + "\n\n";
      } else if (callType === "Promise to Pay") {
        output += callType + "\n\n";
      } else if (callType === "Outage") {
        output += callType + " refund" + "\n\n";
      } else if (callType === "Vacation") {
        output += callType + " suspend" + "\n\n";
      } else {
        output += '';
      }
      output += 'Problem: ' + cxProblem + "\n\n";
      output += 'Name: ' + cxName + "\n";

      if (cxStatus === "CX Status") {
        output += 'CX Status: unknown' + "\n";
      } else {
        output += 'CX Status: ' + cxStatus + "\n";
      }

      if (cxVerify === "Verification") {
        output += 'Verification: unknown' + "\n";
      } else {
        output += 'Verification: ' + cxVerify + "\n";
      }

      output += 'MSISDN: ' + cxMsisdn + "\n";

      if (roleTag !== "Role") {
        output += 'Agent Role: ' + roleTag + "\n";
      }
      output += 'Contact ID: ' + contactId + "\n\n";
      output += 'Action: ' + cxAction + "\n\n";
      if (callType === "Promise to Pay") {
        output += 'Last Broken PTP: ' + cxBroken + "\n";
        output += 'Will pay: $' + cxPay + "\n";
        output += 'Payment method: ' + cxMethod + "\n";
        output += 'Payment due: ' + ptpPayBefore + "\n";
      }
      if (callType === "Outage") {
        output += 'Service outage for ' + outLength + " days" + "\n";
        output += 'Based on a monthly rate of $' + outMonth + "\n";
        output += 'I offered a refund of $' + roundedOffer + "\n";
        if (outRefundChoice === "Refund") {
          output += "CX opted for the refund option of $" + roundedOffer + " which I have applied" + "\n";
        } else if (outRefundChoice === "Monthly5") {
          output += "CX opted for the temporary $5 discount for " + altOfferMonths + " months, which I have applied" + "\n";
        } else if (outRefundChoice === "noOffer") {
          output += "CX opted for neither refund choice that I offered." + "\n";
        } else {
          output += "I don't know what option the customer chose." + "\n";
        }
      }
      if (cxCheckPayBefore === true && callType === "Promise to Pay") {
        output += "- " + checkPayBefore.getAttribute('value') + "\n";
      }
      if (cxCheckBroken90 === true && callType === "Promise to Pay") {
        output += "- " + checkBroken90.getAttribute('value') + "\n";
      }
      if (cxcheckCash24 === true && callType === "Promise to Pay") {
        output += "- " + checkCash24.getAttribute('value') + "\n";
      }
      if (cxcheck3Business === true && callType === "Promise to Pay") {
        output += "- " + check3Business.getAttribute('value') + "\n";
      }

      $("#casOutput").val(output)
      return text = output;
    }

    function copyNotes(i, j) {
      $(i).click(function() {
        var copyText = $(j);
        copyText.select();
        document.execCommand("copy");
      });
    }

    copyNotes("#copy-btn", "#casOutput");

    // reset button
    function resetForm() {
      document.getElementById("notatorForm").reset();
      $('.temporary').hide();
      $('.warning').hide();
    }

    //history happens here
    function history() {
      var historyPaste = text;
      var date = new Date();
      date.getDate();
      var time = new Date().toLocaleTimeString();
      var d = date.toString().split(" ").splice(1, 3).join(" ");
      var dateTime = d + " " + time;
      $("#historyPrint").prepend(dateTime + "\n\n" + text + "<hr>");
    }

    function resetHistoryCombo() {
      resetForm();
      history();
    }



    // reset button Prepaid calculator
    function resetPreCalc() {
      document.getElementById("prepaidProration").reset();
    }

    // reset button Postpaid calculator
    function resetPostCalc() {
      document.getElementById("postpaidProration").reset();
    }


    // simple thirds prepaid calculators
    function prepaidThirdsCalc() {
      var prepaidThirdsDays = $("#prepaidThirds").val();
      var prepaidPrice = $("#prepaidItemPrice").val();
      var prepaidAmountToPay = prepaidPrice;
      if (prepaidThirdsDays === "33") {
        prepaidAmountToPay = (prepaidPrice * 0.33).toFixed(2);
      } else if (prepaidThirdsDays === "66") {
        prepaidAmountToPay = (prepaidPrice * 0.66).toFixed(2);
      } else {
        prepaidAmountToPay = prepaidPrice;
      }
      return $("#prepaidThirdsResult").val(prepaidAmountToPay)
    }

    // postpaid calculator
    function postpaidCalc() {
      var oldMrcPrice = $("#inputOldMrcPrice").val();
      var mrcPrice = $("#inputMrcPrice").val();
      var mrcDaysRemaining = $("#inputMrcDaysRemaining").val();
      var postpaidAmountToPay = (((mrcPrice - oldMrcPrice) / 30.4375) * mrcDaysRemaining).toFixed(2);
      return $("#postpaidResult").val(postpaidAmountToPay)
    }
  </script>
</body>

</html>
