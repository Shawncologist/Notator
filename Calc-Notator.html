<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    body {
      background-color: #FFFFFF;
      width: 100%;
      height: 100vh;
    }

    /* div {
    border: 1px solid pink;
  } */

    section {
      padding: 0 0 60px 0;
      min-height: 660px;
    }

    .btn:focus {
      outline: none;
      box-shadow: none;
    }

    .btn-combine {
      float: left;
      margin: 10px 0;
    }

    .btn-reset {
      float: right;
      margin: 10px 0;
    }

    .container-fluid {
      padding-left: 0;
      padding-right: 0;
    }

    .divider {
      width: 80%;
      margin: auto;
    }

    .fa-icon {
      color: #616161;
    }

    .fas-nav {
      padding: 0 0 0 34px;
    }

    .form-select {
      color: #71869A;
    }

    .form-control::placeholder {
      color: #CCCCCC;
      opacity: 1;
    }


    .row {
      margin-bottom: 15px;
    }

    .warning {
      color: red;
      text-align: center;
      margin-bottom: 0px;
      display: none;
    }
  </style>

<body>
  <section>
    <form id="prepaidProration">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-3">
            <h5>Pre-Paid Proration Calculator</h5>
            <div class="input-group g-3">
              <div class="input-group-text"><i class="fas fa-calendar fa-icon"></i></div>
              <select class="form-select" aria-label="Default select" id="prorationPeriod">
                <option selected>Days until next top-up date?</option>
                <option value="33">1 - 10 days remaining</option>
                <option value="66">11 - 20 days remaining</option>
                <option value="99">21 - 30 days remaining</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3">
            <div class="input-group g-3">
              <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
              <label for="inputPrepaidRatePlan" class="visually-hidden">Rate plan price</label>
              <input type="numbers" class="form-control" id="inputPrepaidRatePlan" placeholder="Price of the item">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3">
            <div class="">
              <button id="pp-calc-btn" onclick="prepaidCalculator()" class="btn btn-secondary btn-combine" type="button">Calculate</button>
              <button class="btn btn-secondary btn-reset justify-content-md-end" type="button" value="reset" onClick="resetPreCalc()">Reset</button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3">
            <div class="input-group g-3">
              <div class="input-group-text"><i class="fas fa-equals fa-icon"></i></div>
              <label for="inputPrepaidRatePlan" class="visually-hidden">Rate plan price</label>
              <input type="text" class="form-control" id="prepaidCalcResult" placeholder="Amount to pay">
            </div>

          </div>

        </div>


        <!-- container end -->
      </div>
    </form>

  </section>


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://kit.fontawesome.com/8e9d7e365b.js" crossorigin"anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script>
    function formsCombine() {
      // var output = "";

      var cxName = $("#inputName").val();
      var cxMsisdn = $("#inputMsisdn").val();
      var cxStatus = $("#inputStatus").val();
      var contactId = $("#inputContactId").val();
      var cxVerify = $("#inputVerification").val();
      var cxProblem = $("#inputProblem").val();
      var cxAction = $("#inputAction").val();
      var callType = $("#inputSpecialTopic").val();
      var cxBroken = $("#inputLastBroken").val();
      var cxPay = $("#inputPayAmount").val();
      var cxMethod = $("#inputPayMethod").val();
      var cxCheckPayBefore = document.getElementById("checkPayBefore").checked;
      var cxCheckBroken90 = document.getElementById("checkBroken90").checked;
      var cxcheckCash24 = document.getElementById("checkCash24").checked;
      var cxcheck3Business = document.getElementById("check3Business").checked;

      var output = 'Problem: ' + cxProblem + "\n\n";
      if (callType === "Loyalty" || callType === "Tech" || callType === "Treatment") {
        output += 'Call Type: ' + callType + "\n";
      }
      output += 'Name: ' + cxName + "\n";
      output += 'CX Status: ' + cxStatus + "\n";
      output += 'Verification: ' + cxVerify + "\n";
      output += 'MSISDN: ' + cxMsisdn + "\n";
      output += 'Contact ID: ' + contactId + "\n\n";
      output += 'Action: ' + cxAction + "\n\n";
      if (callType === "Treatment") {
        output += 'Last Broken PTP: ' + cxBroken + "\n";
        output += 'Will pay: $' + cxPay + "\n";
        output += 'Payment method: ' + cxMethod + "\n";
      }
      if (cxCheckPayBefore === true && callType === "Treatment") {
        output += "- " + checkPayBefore.getAttribute('value') + "\n";
      }
      if (cxCheckBroken90 === true && callType === "Treatment") {
        output += "- " + checkBroken90.getAttribute('value') + "\n";
      }
      if (cxcheckCash24 === true && callType === "Treatment") {
        output += "- " + checkCash24.getAttribute('value') + "\n";
      }
      if (cxcheck3Business === true && callType === "Treatment") {
        output += "- " + check3Business.getAttribute('value') + "\n";
      }

      $("#casOutput").val(output);
    }

    function copyNotes(i, j) {
      $(i).click(function() {
        var copyText = $(j);
        copyText.select();
        document.execCommand("copy");
      });
    }

    copyNotes("#copy-btn", "#casOutput");

    // reset button
    function resetForm() {
      document.getElementById("notatorForm").reset();
      $('.temporary').hide();
      $('.warning').hide();
    }

    // CA form display, or not
    $("#inputSpecialTopic").change(function() {
      if ($(this).val() == "Loyalty") {
        $('#cancelType').show();
        $('#techType').hide();
        $('#lastBroken').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
      } else if ($(this).val() == "Tech") {
        $('#cancelType').hide();
        $('#techType').show();
        $('#lastBroken').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
      } else if ($(this).val() == "Treatment") {
        $('#cancelType').hide();
        $('#techType').hide();
        $('#lastBroken').show();
        $('#payAmount').show();
        $('#payMethod').show();
        $('#treatmentChecks').show();
      } else {
        $('#cancelType').hide();
        $('#techType').hide();
        $('#lastBroken').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
      }
    });
    $("#inputSpecialTopic").trigger("change");

    // warning message (flawed code, needs to be done better)
    $(document.body).click(function() {
      if ($("#inputStatus").val() === "Not Authorized" || $("#inputVerification").val() === "No, wrong PIN" || $("#inputVerification").val() === "No, unverified") {
        $('.warning').show();
      } else {
        $('.warning').hide();
      }
    });
  </script>
</body>

</html>
