<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    body {
      background-color: #FFFFFF;
      width: 100%;
      height: 100vh;
    }

    /* div {
    border: 1px solid pink;
  } */

    section {
      padding: 0 0 60px 0;
      min-height: 660px;
    }

    .btn:focus {
      outline: none;
      box-shadow: none;
    }

    .btn-combine {
      float: left;
      margin: 10px 0;
    }

    .btn-reset {
      float: right;
      margin: 10px 0;
    }

    .container-fluid {
      padding-left: 0;
      padding-right: 0;
    }

    .divider {
      width: 80%;
      margin: auto;
    }

    .fa-icon {
      color: #616161;
    }

    .fas-nav {
      padding: 0 0 0 34px;
    }

    .form-select {
      color: #71869A;
    }

    .form-control::placeholder {
      color: #CCCCCC;
      opacity: 1;
    }


    .row {
      margin-bottom: 15px;
    }

    .warning {
      color: red;
      text-align: center;
      margin-bottom: 0px;
      display: none;
    }
  </style>

<body>
  <!-- Nav tabs -->
  <ul class="nav nav-tabs fixed-bottom" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="cas-tab" data-bs-toggle="tab" data-bs-target="#cas" type="button" role="tab" aria-controls="home" aria-selected="true">CAS</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="rs-tab" data-bs-toggle="tab" data-bs-target="#rs" type="button" role="tab" aria-controls="profile" aria-selected="false">Retail Support</button>
    </li>
    <li class="nav-item " role="presentation">
      <button class="nav-link" id="calculators-tab" data-bs-toggle="tab" data-bs-target="#calculator" type="button" role="tab" aria-controls="messages" aria-selected="false">Calculators</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab" aria-controls="settings" aria-selected="false">Settings</button>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div class="tab-pane active" id="cas" role="tabpanel" aria-labelledby="home-tab">
      <section id="CAS">
        <form id="notatorForm">
          <div class="container-fluid">
            <div class="row">
              <!-- column a -->
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-6">
                    <div class="input-group g-3">
                      <div class="input-group-text"><i class="fas fa-user fa-icon"></i></div>
                      <label for="inputName" class="visually-hidden"></label>
                      <input type="text" class="form-control bluesy" id="inputName" placeholder="First and Last Name">
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="input-group g-3">
                      <div class="input-group-text"><i class="fas fa-phone fa-icon"></i></div>
                      <label for="inputMsisdn" class="visually-hidden">MSISDN</label>
                      <input type="numbers" class="form-control" id="inputMsisdn" placeholder="Customer's Phone #">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-4">
                    <div class="input-group g-3">
                      <div class="input-group-text"><i class="fas fa-hand-paper fa-icon"></i></div>
                      <select class="form-select" aria-label="Default select example" id="inputStatus">
                        <option selected>Caller's status?</option>
                        <option value="Account Holder">Account Holder</option>
                        <option value="Authorized User">Authorized User</option>
                        <option value="Device User">Device User</option>
                        <option value="Not Authorized">Not Authorized</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="input-group g-3">
                      <div class="input-group-text"><i class="fas fa-lock fa-icon"></i></div>
                      <select class="form-select" aria-label="Default select example" id="inputVerification">
                        <option selected>Verification?</option>
                        <option value="Yes, with PIN">Yes, with PIN</option>
                        <option value="Yes, with MFA">Yes, with MFA</option>
                        <option value="No, wrong PIN">No, wrong PIN</option>
                        <option value="No, unverified">No, unverified</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="input-group g-3">
                      <div class="input-group-text"><i class="fas fa-hashtag fa-icon"></i></div>
                      <label for="inputContactId" class="visually-hidden">Contact ID</label>
                      <input type="numbers" class="form-control" id="inputContactId" placeholder="Conversation ID">
                    </div>
                  </div>
                </div>
                <div class="row warning">
                  <div class="col-12">
                    <!-- <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                      <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
                        <path
                          d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                      </symbol>
                    </svg>
                    <div class="alert alert-danger d-flex align-items-center" role="alert">
                      <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:">
                        <use xlink:href="#exclamation-triangle-fill" />
                      </svg>
                      <div class="align-items-center">
                        <strong>This customer may not be given any information from the account!</strong>
                      </div>
                    </div> -->
                  </div>
                  <p><strong>⚠ This customer may not be given any information from the account! ⚠</strong></p>
                </div>
                <div class="row">
                  <div class="col-12">
                    <label for="inputProblem" class="visually-hidden">Problem</label>
                    <textarea rows="4" cols="10" class="form-control" id="inputProblem" placeholder="Reason for the customer's call"></textarea>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <label for="inputAction" class="visually-hidden">Actions</label>
                    <textarea rows="10" cols="10" class="form-control" id="inputAction" placeholder="Actions you took and information you gave"></textarea>
                  </div>
                </div>
                <!-- Specialized Call Fields -->
                <div class="row">
                  <div class="col-6">
                    <div class="input-group g-3">
                      <div class="input-group-text"><i class="fas fa-hat-wizard fa-icon"></i></div>
                      <select class="form-select" aria-label="Default select example" id="inputSpecialTopic">
                        <option selected>Select a specialized topic</option>
                        <option value="Loyalty">Loyalty</option>
                        <option value="Tech">Technical Support</option>
                        <option value="Treatment">Treatment</option>
                        <option value="Vacation">Vacation Suspend</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="input-group g-3 temporary" id="lastBroken">
                      <div class="input-group-text"><i class="fas fa-calendar-times fa-icon"></i></div>
                      <label for="inputLastBroken" class="visually-hidden"></label>
                      <input type="date" class="form-control" id="inputLastBroken" placeholder="Last Broken PTP">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-6">
                    <div class="input-group g-3 temporary" id="payAmount">
                      <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
                      <label for="inputMsisdn" class="visually-hidden">Payment Amount</label>
                      <input type="numbers" class="form-control" id="inputPayAmount" placeholder="Amount to be paid">
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="input-group g-3 temporary" id="payMethod">
                      <div class="input-group-text"><i class="fas fa-donate fa-icon"></i></div>
                      <select class="form-select" aria-label="Default select example" id="inputPayMethod">
                        <option selected>Method of payment</option>
                        <option value="Bank">Bank</option>
                        <option value="Customer Care">Customer Care</option>
                        <option value="MyAccount">MyAccount</option>
                        <option value="Retail">Retail</option>
                        <option value="Unknown">Unknown</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row temporary" id="treatmentChecks">
                  <div class="col-12">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="I informed them that payment must be received within 7 days." id="checkPayBefore">
                      <label class="form-check-label" for="checkPayBefore">
                        I informed them that payment must be received within 7 days.
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="I informed them we will not accept another Promise to Pay for 90 days if they miss this payment." id="checkBroken90">
                      <label class="form-check-label" for="checkBroken90">
                        I informed them we will not accept another Promise to Pay for 90 days if they miss this payment.
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="I informed them that cash payments may take up to 24 hours." id="checkCash24">
                      <label class="form-check-label" for="checkCash24">
                        I informed them that cash payments may take 24 hours.
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="I informed them that bank payments may take 3 - 5 business days." id="check3Business">
                      <label class="form-check-label" for="check3Business">
                        I informed them that bank payments may take 3 - 5 business days.
                      </label>
                    </div>
                  </div>
                </div>

              </div>
              <!-- column b -->
              <div class="col-lg-6">
                <label for="casOutput" class="visually-hidden">Note</label>
                <textarea rows="25" cols="10" class="form-control" id="casOutput" placeholder="Your notes will appear here when you click Combine"></textarea>
                <div>
                  <button id="copy-btn" onclick="formsCombine()" class="btn btn-secondary btn-combine" type="button">Combine & Copy</button>
                  <button class="btn btn-secondary btn-reset justify-content-md-end" type="button" value="reset" onClick="resetForm()">Reset</button>
                </div>
              </div>
            </div>
          </div>
        </form>
    </div>
    </section>
    <div class="tab-pane" id="rs" role="tabpanel" aria-labelledby="profile-tab">
      <section id="rs">
        <h4>Retail Support</h4>
      </section>
    </div>
    <div class="tab-pane" id="calculator" role="tabpanel" aria-labelledby="messages-tab">
      <section id="calculators">
        <h4>Calculators</h4>
        <div class="accordion accordion-flush" id="accordionFlushExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="flush-headingOne">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
        Pre-paid Proration Calculator
      </button>
    </h2>
    <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body">

        <form id="prepaidProration">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-3">
                <div class="input-group g-3">
                  <div class="input-group-text"><i class="fas fa-calendar fa-icon"></i></div>
                  <select class="form-select" aria-label="Default select" id="prorationPeriod">
                    <option selected>Days until next top-up date?</option>
                    <option value="33">1 - 10 days remaining</option>
                    <option value="66">11 - 20 days remaining</option>
                    <option value="99">21 - 30 days remaining</option>
                  </select>
                </div>
                </div>
            </div>
            <div class="row">
              <div class="col-lg-3">
                <div class="input-group g-3">
                  <div class="input-group-text"><i class="fas fa-dollar-sign fa-icon"></i></div>
                  <label for="inputPrepaidRatePlan" class="visually-hidden">Rate plan price</label>
                  <input type="numbers" class="form-control" id="inputPrepaidRatePlan" placeholder="Price of the item">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-3">
                <div class="">
                  <button id="pp-calc-btn" onclick="prepaidCalculator()" class="btn btn-secondary btn-combine" type="button">Calculate</button>
                  <button class="btn btn-secondary btn-reset justify-content-md-end" type="button" value="reset" onClick="resetPreCalc()">Reset</button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-3">
                <div class="input-group g-3">
                  <div class="input-group-text"><i class="fas fa-equals fa-icon"></i></div>
                  <label for="inputPrepaidRatePlan" class="visually-hidden">Rate plan price</label>
                  <input type="text" class="form-control" id="prepaidCalcResult" placeholder="Amount to pay">
                </div>

              </div>

            </div>


<!-- container end -->
          </div>
        </form><br>
Formulas that should be here?<br>
Questions to answer/calculate are:<br>
changing rate plan, what is required top-up amount?<br>
adding add-on, what is required top-up amount?<br>

top-up date to transaction date = diff days (33/66/100)<br>
old rate plan - new rate plan = diff rate * 0.33/0.66/1 (need to handle negative result?)<br>
new addon * 0.33/0.66/1<br>



      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="flush-headingTwo">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
        Post-Paid Proration Calculator
      </button>
    </h2>
    <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body">Placeholder content for this accordion.</div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="flush-headingThree">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
        MyTabs
      </button>
    </h2>
    <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body">Placeholder content for this accordion.</div>
    </div>
  </div>
</div>
      </section>
    </div>
    <div class="tab-pane" id="settings" role="tabpanel" aria-labelledby="settings-tab">
      <section id="settings">
        <h4>Settings</h4>
        <p>There are no settings yet.</p>
      </section>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://kit.fontawesome.com/8e9d7e365b.js" crossorigin"anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script>
    function formsCombine() {
      // var output = "";

      var cxName = $("#inputName").val();
      var cxMsisdn = $("#inputMsisdn").val();
      var cxStatus = $("#inputStatus").val();
      var contactId = $("#inputContactId").val();
      var cxVerify = $("#inputVerification").val();
      var cxProblem = $("#inputProblem").val();
      var cxAction = $("#inputAction").val();
      var callType = $("#inputSpecialTopic").val();
      var cxBroken = $("#inputLastBroken").val();
      var cxPay = $("#inputPayAmount").val();
      var cxMethod = $("#inputPayMethod").val();
      var cxCheckPayBefore = document.getElementById("checkPayBefore").checked;
      var cxCheckBroken90 = document.getElementById("checkBroken90").checked;
      var cxcheckCash24 = document.getElementById("checkCash24").checked;
      var cxcheck3Business = document.getElementById("check3Business").checked;

      var output = 'Problem: ' + cxProblem + "\n\n";
      if (callType === "Loyalty" || callType === "Tech" || callType === "Treatment") {
        output += 'Call Type: ' + callType + "\n";
      }
      output += 'Name: ' + cxName + "\n";
      output += 'CX Status: ' + cxStatus + "\n";
      output += 'Verification: ' + cxVerify + "\n";
      output += 'MSISDN: ' + cxMsisdn + "\n";
      output += 'Contact ID: ' + contactId + "\n\n";
      output += 'Action: ' + cxAction + "\n\n";
      if (callType === "Treatment") {
        output += 'Last Broken PTP: ' + cxBroken + "\n";
        output += 'Will pay: $' + cxPay + "\n";
        output += 'Payment method: ' + cxMethod + "\n";
      }
      if (cxCheckPayBefore === true && callType === "Treatment") {
        output += "- " + checkPayBefore.getAttribute('value') + "\n";
      }
      if (cxCheckBroken90 === true && callType === "Treatment") {
        output += "- " + checkBroken90.getAttribute('value') + "\n";
      }
      if (cxcheckCash24 === true && callType === "Treatment") {
        output += "- " + checkCash24.getAttribute('value') + "\n";
      }
      if (cxcheck3Business === true && callType === "Treatment") {
        output += "- " + check3Business.getAttribute('value') + "\n";
      }

      $("#casOutput").val(output);
    }

    function copyNotes(i, j) {
      $(i).click(function() {
        var copyText = $(j);
        copyText.select();
        document.execCommand("copy");
      });
    }

    copyNotes("#copy-btn", "#casOutput");

    // reset button
    function resetForm() {
      document.getElementById("notatorForm").reset();
      $('.temporary').hide();
      $('.warning').hide();
    }

    // CA form display, or not
    $("#inputSpecialTopic").change(function() {
      if ($(this).val() == "Loyalty") {
        $('#cancelType').show();
        $('#techType').hide();
        $('#lastBroken').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
      } else if ($(this).val() == "Tech") {
        $('#cancelType').hide();
        $('#techType').show();
        $('#lastBroken').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
      } else if ($(this).val() == "Treatment") {
        $('#cancelType').hide();
        $('#techType').hide();
        $('#lastBroken').show();
        $('#payAmount').show();
        $('#payMethod').show();
        $('#treatmentChecks').show();
      } else {
        $('#cancelType').hide();
        $('#techType').hide();
        $('#lastBroken').hide();
        $('#payAmount').hide();
        $('#payMethod').hide();
        $('#treatmentChecks').hide();
      }
    });
    $("#inputSpecialTopic").trigger("change");

    // warning message (flawed code, needs to be done better)
    $(document.body).click(function() {
      if ($("#inputStatus").val() === "Not Authorized" || $("#inputVerification").val() === "No, wrong PIN" || $("#inputVerification").val() === "No, unverified") {
        $('.warning').show();
      } else {
        $('.warning').hide();
      }
    });
  </script>
</body>

</html>
